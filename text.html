<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Socket.io Chat</title>
    <style>
        body { font-family: Arial, Helvetica, sans-serif; max-width: 800px; margin: 20px auto; }
        #messages { border: 1px solid #ccc; height: 300px; overflow-y: auto; padding: 8px; background: #fafafa; }
        #messages div { padding: 6px 8px; margin: 4px 0; border-radius: 4px; background: #fff; box-shadow: 0 0 0 1px rgba(0,0,0,0.02);} 
        form { display: flex; gap: 8px; margin-top: 8px; }
        input[type="text"] { flex: 1; padding: 8px; font-size: 14px; }
        button { padding: 8px 12px; }
    </style>
</head>
<body>
    <h2>Simple Chat</h2>
    <div id="messages" aria-live="polite"></div>

    <form id="chatForm">
        <input id="messageInput" autocomplete="off" placeholder="Type a message..." type="text" />
        <button type="submit">Send</button>
    </form>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        const form = document.getElementById('chatForm');
        const input = document.getElementById('messageInput');
        const messages = document.getElementById('messages');

        // send message to server
        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const text = input.value.trim();
            if (!text) return;
            socket.emit('chat message', text);
            input.value = '';
            input.focus();
        });

        // receive chat messages from server
        socket.on('chat message', (msg) => {
            const el = document.createElement('div');
            el.textContent = msg;
            messages.appendChild(el);
            messages.scrollTop = messages.scrollHeight;
        });

        // optional: server could emit 'clear' to remove previous messages
        socket.on('clear', () => { messages.innerHTML = ''; });
    </script>
</body>
</html>